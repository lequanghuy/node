#!/usr/bin/env bash
# bin/compile BUILD_DIR CACHE_DIR ENV_DIR

BUILD_DIR=$1
CACHE_DIR=$2

DESTINATION=$BUILD_DIR/bin

if [ ! -d "$DESTINATION/.nvm" ]; then
    # Install NVM
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bash
fi

# Activate NVM
source "$DESTINATION/.nvm/nvm.sh"

# Install Node.js
nvm install node

# Verify Node.js and npm installation
echo "Node.js version:"
node -v
echo "npm version:"
npm -v

echo "node directory: "
which node

npm install